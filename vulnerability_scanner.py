import nmap
import platform

def scan_open_ports(ip):
    print(f"Scanning open ports on {ip}...")
    nm = nmap.PortScanner()
    nm.scan(ip, '1-1024')
    report = ""
    for host in nm.all_hosts():
        report += f"Host: {host} ({nm[host].hostname()})\n"
        for proto in nm[host].all_protocols():
            report += f"Protocol: {proto}\n"
            ports = nm[host][proto].keys()
            for port in ports:
                state = nm[host][proto][port]['state']
                report += f"Port: {port} - State: {state}\n"
    return report

def check_system_info():
    print("Gathering system information...")
    system_info = platform.uname()
    return f"System: {system_info.system}\nNode: {system_info.node}\nRelease: {system_info.release}\nVersion: {system_info.version}\nMachine: {system_info.machine}\nProcessor: {system_info.processor}\n"

def save_report(data):
    with open("vulnerability_report.txt", "w") as file:
        file.write(data)
    print("Report saved as 'vulnerability_report.txt'.")

def main():
    print("=== Vulnerability Scanning Tool ===")
    ip = input("Enter the target IP address: ")
    report = ""
    report += "=== System Information ===\n"
    report += check_system_info()
    report += "\n=== Port Scanning Results ===\n"
    report += scan_open_ports(ip)
    save_report(report)
    print("\nScan completed. Check 'vulnerability_report.txt' for details.")

if __name__ == "__main__":
    main()
